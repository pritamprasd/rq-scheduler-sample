version: '3.6'
services:
  tester:
    build: tester
    environment:
      REDIS_PORT: ${PORT}
      REDIS_HOST: ${HOST}
      REDIS_PASS: ${PASS}
    depends_on:
      - redis

  redis:
    image: "redis:alpine"
    command: redis-server --requirepass ${PASS}
    ports:
     - ${PORT}:6379
    volumes:
     - $PWD/redis-data:/var/lib/redis
     - $PWD/redis.conf:/usr/local/etc/redis/redis.conf
    environment:
     - REDIS_REPLICATION_MODE=master